"use strict";var e,t,n=(e=require("react"))&&"object"==typeof e&&"default"in e?e.default:e;function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function i(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}!function(e){e.OnStart="start",e.OnChange="change",e.OnEnd="end"}(t||(t={}));var a=function(){},s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.forEach(function(e){return e.apply(void 0,n)})}},c=function(e,t){return e.map(function(e,n){return e+t[n]})},u=function(e,t){return e.map(function(e,n){return e-t[n]})},l=function(e){return function(t,n,r){var o=e?"addEventListener":"removeEventListener";n.forEach(function(e){return t[o](e[0],e[1],r)})}},d=l(!0),h=l(!1);function v(e){return{shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,ctrlKey:e.ctrlKey}}function f(e){return r({xy:[e.deltaX,e.deltaY]},v(e))}function g(e){var t=e.touches,n=e.buttons,o=e.changedTouches,i=t&&t.length>0?t:o&&o.length>0?o:null,a=i?i[0]:e;return r({xy:[a.clientX,a.clientY],touches:i&&i.length||0,down:i&&i.length>0||n>0,buttons:n},v(e))}function y(e){var t=e.touches,n=t[1].clientX-t[0].clientX,o=t[1].clientY-t[0].clientY;return r({da:[Math.hypot(n,o),-180*Math.atan2(n,o)/Math.PI],origin:[(t[1].clientX+t[0].clientX)/2,(t[1].clientY+t[0].clientY)/2],touches:2,down:t.length>0},v(e))}function p(e,t,n){return n=n||Math.hypot.apply(Math,e),t?n/t:0}function m(e,t){return t?e.map(function(e){return e/t}):Array(e.length).fill(0)}function E(e){return Math.hypot.apply(Math,e)}function S(e,t){return t=t||Math.hypot.apply(Math,e)||1,e.map(function(e){return e/t})}function w(e,t,n){var r=Math.hypot.apply(Math,t);return{velocities:m(t,n),velocity:p(t,n,r),distance:E(e),direction:S(t,r)}}var P={drag:{stateKey:"drag",handlerKey:"onDrag"},pinch:{stateKey:"pinch",handlerKey:"onPinch"},move:{stateKey:"move",handlerKey:"onMove"},scroll:{stateKey:"scroll",handlerKey:"onScroll"},wheel:{stateKey:"wheel",handlerKey:"onWheel"},hover:{stateKey:"move",handlerKey:"onHover"}},b={domTarget:void 0,event:{passive:!0,capture:!1},window:"undefined"!=typeof window?window:void 0,dragDelay:!1,passiveEvents:!0,pointerEvents:!1,enabled:!0,drag:!0,pinch:!0,scroll:!0,wheel:!0,hover:!0,move:!0},K={event:void 0,currentTarget:void 0,pointerId:void 0,values:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,time:void 0,cancel:a,canceled:!1,memo:void 0,args:void 0},D={xy:[0,0],vxvy:[0,0],velocity:0,distance:0},T={da:[0,0],vdva:[0,0],origin:void 0,turns:0},x={shared:{hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1},move:r({},K,{},D),drag:r({},K,{},D),scroll:r({},K,{},D),wheel:r({},K,{},D),pinch:r({},K,{},T)},C={first:!1,last:!0,active:!1},L=function(){function e(e,n,o){var i=this;void 0===o&&(o=[]),this.gestureKey=e,this.controller=n,this.args=o,this.continuousGesture=!1,this.setTimeout=function(e,t){var n;void 0===t&&(t=140);for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];i.controller.timeouts[i.stateKey]=(n=window).setTimeout.apply(n,[e,t].concat(o))},this.clearTimeout=function(){clearTimeout(i.controller.timeouts[i.stateKey])},this.addWindowListeners=function(e){i.controller.addWindowListeners(i.stateKey,e)},this.removeWindowListeners=function(){i.controller.removeWindowListeners(i.stateKey)},this.updateState=function(e,t){i.controller.updateState(e,t,i.stateKey)},this.fireGestureHandler=function(e){i.controller.fireGestureHandler(i.gestureKey,e)},this.onStart=function(e,n){var o=i.getPayloadFromEvent(e),a=o.values,s=o.gesturePayload,c=o.sharedPayload,l=r({},x[i.stateKey],{values:a,event:e,first:!0,active:!0,time:e.timeStamp,args:i.args}),d=i.state,h=d.values,v=d.offset;i.continuousGesture?(l.initial=l.previous=h,l.delta=l.movement=u(a,h),l.offset=a,Object.assign(l,w(l.movement,l.delta,0))):(l.initial=l.previous=a,l.offset=v),i.updateState(r({},i.sharedStartState,{},c),r({},l,{},s,{},n)),i.fireGestureHandler(t.OnStart)},this.onChange=function(e,n){var o=i.getPayloadFromEvent(e),a=o.gesturePayload,s=o.sharedPayload,c=i.getKinematics(o.values,e);i.updateState(r({},s),r({first:!1},c,{},a,{},n)),i.fireGestureHandler(t.OnChange)},this.onEnd=function(e,n){i.state.active&&(i.removeWindowListeners(),i.updateState(i.sharedEndState,r({event:e},C,{},n)),i.fireGestureHandler(t.OnEnd))},this.onCancel=function(e){i.updateState(null,{canceled:!0,cancel:a}),requestAnimationFrame(function(){return i.onEnd(e)})},this.timeoutHandler=function(e){i.enabled&&(i.clearTimeout(),i.setTimeout(i.onEnd),i.state.active?i.onChange(e):i.onStart(e))},this.stateKey=P[e].stateKey}var n;return(n=[{key:"enabled",get:function(){return this.controller.config.enabled&&this.controller.config[this.gestureKey]}},{key:"state",get:function(){return this.controller.state[this.stateKey]}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,n),e}(),M=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.getKinematics=function(e,t){var n=this.state,r=n.values,o=n.offset,i=n.time,a=u(e,n.initial),s=u(e,r),l=w(a,s,t.timeStamp-i),d=l.velocity,h=l.velocities,v=l.distance,f=l.direction;return{event:t,values:e,movement:a,offset:c(o,s),delta:s,velocity:d,vxvy:h,distance:v,direction:f,previous:r,time:t.timeStamp}},t}(L),O=180,W=function(e){function t(t,n){var r;return(r=e.call(this,"drag",t,n)||this).sharedStartState={dragging:!0,down:!0},r.sharedEndState={dragging:!1,down:!1,buttons:0,touches:0},r.delayedEvent=!1,r.onDragStart=function(e){if(r.enabled&&!(g(e).touches>1)){var t=e.currentTarget;if(r.controller.config.pointerEvents?t&&t.setPointerCapture(e.pointerId):(r.removeWindowListeners(),r.addWindowListeners([["mousemove",r.onDragChange],["touchmove",r.onDragChange],["mouseup",r.onDragEnd],["touchend",r.onDragEnd],["touchcancel",r.onDragEnd]])),r.controller.config.dragDelay){var n="number"==typeof r.controller.config.dragDelay?r.controller.config.dragDelay:O;"function"==typeof e.persist&&e.persist(),r.delayedEvent=!0,r.setTimeout(function(){return r.startDrag(e)},n)}else r.startDrag(e)}},r.startDrag=function(e){r.onStart(e,{currentTarget:e.currentTarget,pointerId:e.pointerId,cancel:function(){return r.onCancel(e)}}),r.delayedEvent=!1},r.onDragChange=function(e){var t=r.state;if(!t.canceled)if(t.active){var n=g(e);0!==n.buttons||0!==n.touches?r.onChange(e,{cancel:function(){return r.onCancel(e)}}):r.onEnd(e)}else r.delayedEvent&&(r.clearTimeout(),r.startDrag(e))},r.onDragEnd=function(e){if(r.clearTimeout(),r.delayedEvent=!1,r.state.active){var t=r.state,n=t.currentTarget;n&&r.controller.config.pointerEvents&&n.releasePointerCapture(t.pointerId),r.onEnd(e)}},r}o(t,e);var n=t.prototype;return n.getPayloadFromEvent=function(e){var t=g(e);return{values:t.xy,sharedPayload:i(t,["xy"])}},n.getEventBindings=function(){return this.controller.config.pointerEvents?[["onPointerDown",this.onDragStart],["onPointerMove",this.onDragChange],[["onPointerUp"],this.onDragEnd]]:[[["onMouseDown","onTouchStart"],this.onDragStart]]},t}(M),G=function(e){function t(t,n){var r;return(r=e.call(this,"scroll",t,n)||this).sharedStartState={scrolling:!0},r.sharedEndState={scrolling:!1,velocity:0,vxvy:[0,0]},r.continuousGesture=!0,r}o(t,e);var n=t.prototype;return n.getPayloadFromEvent=function(e){var t=function(e){var t=e.currentTarget;return r({xy:[t.scrollX||t.scrollLeft||0,t.scrollY||t.scrollTop||0]},v(e))}(e);return{values:t.xy,sharedPayload:i(t,["xy"])}},n.getEventBindings=function(){return[["onScroll",this.timeoutHandler]]},t}(M),H=function(e){function t(t,n){var r;return(r=e.call(this,"wheel",t,n)||this).sharedStartState={wheeling:!0},r.sharedEndState={wheeling:!1,velocity:0,vxvy:[0,0]},r.continuousGesture=!0,r.onWheel=function(e){e.ctrlKey&&r.controller.actions.has("onPinch")||r.timeoutHandler(e)},r}o(t,e);var n=t.prototype;return n.getPayloadFromEvent=function(e){var t=this.state.xy,n=f(e),r=n.xy,o=i(n,["xy"]);return{values:c(r,t),sharedPayload:o}},n.getEventBindings=function(){return[["onWheel",this.onWheel]]},t}(M),B=function(e){function t(t,n){var r;return(r=e.call(this,"move",t,n)||this).sharedStartState={moving:!0},r.sharedEndState={moving:!1,velocity:0,vxvy:[0,0]},r}o(t,e);var n=t.prototype;return n.getPayloadFromEvent=function(e){var t=g(e);return{values:t.xy,sharedPayload:i(t,["xy"])}},n.getEventBindings=function(){return this.controller.config.pointerEvents?[["onPointerMove",this.timeoutHandler]]:[["onMouseMove",this.timeoutHandler]]},t}(M),j=function(e){function n(n,o){var i;return(i=e.call(this,"hover",n,o)||this).onPointerEnter=function(e){if(i.enabled){var n=i.getPayloadFromEvent(e),o=n.values;i.updateState(r({hovering:!0},n.sharedPayload),{values:o,event:e,args:i.args}),i.fireGestureHandler(t.OnChange)}},i.onPointerLeave=function(e){if(i.enabled){var n=i.getPayloadFromEvent(e),o=n.sharedPayload,a=i.getKinematics(n.values,e);i.updateState(r({hovering:!1,moving:!1},o),r({},a,{},C,{velocity:0,vxvy:[0,0]})),i.controller.fireGestureHandler("move",t.OnEnd),i.controller.fireGestureHandler("hover",t.OnChange)}},i}o(n,e);var a=n.prototype;return a.getPayloadFromEvent=function(e){var t=g(e);return{values:t.xy,sharedPayload:i(t,["xy"])}},a.getEventBindings=function(){return this.controller.config.pointerEvents?[["onPointerEnter",this.onPointerEnter],["onPointerLeave",this.onPointerLeave]]:[["onMouseEnter",this.onPointerEnter],["onMouseLeave",this.onPointerLeave]]},n}(M),F=function(e){function t(t,n,r){return void 0===r&&(r=[]),e.call(this,t,n,r)||this}return o(t,e),t.prototype.getKinematics=function(e,t){var n=e[0],r=e[1],o=this.state,i=o.values,a=o.turns,s=o.initial,u=o.offset,l=o.time,d=n-i[0],h=(r=void 0!==r?r:i[1])-i[1],v=Math.abs(h)>270?a+Math.sign(h):a,f=[d,h-=360*(v-a)],g=[n-s[0],r-360*v-s[1]],y=m(f,t.timeStamp-l),p=S(f);return{event:t,values:[n,r],movement:g,delta:f,offset:c(u,f),vdva:y,direction:p,turns:v,previous:i,time:t.timeStamp}},t}(L),A=function(e){function t(t,n){var r;return(r=e.call(this,"pinch",t,n)||this).sharedStartState={pinching:!0},r.sharedEndState={pinching:!1,down:!1,touches:0},r.onPinchStart=function(e){r.enabled&&2===e.touches.length&&r.onStart(e,{cancel:function(){return r.onCancel(e)}})},r.onPinchChange=function(e){var t=r.state;!t.canceled&&t.active&&2===e.touches.length&&e.timeStamp!==t.time&&r.onChange(e,{cancel:function(){return r.onCancel(e)}})},r}o(t,e);var n=t.prototype;return n.getPayloadFromEvent=function(e){var t=y(e);return{values:t.da,gesturePayload:{origin:t.origin},sharedPayload:i(t,["da","origin"])}},n.getEventBindings=function(){return[["onTouchStart",this.onPinchStart],["onTouchMove",this.onPinchChange],[["onTouchEnd","onTouchCancel"],this.onEnd]]},t}(F),R=function(e){function t(t,n){var r;return(r=e.call(this,"pinch",t,n)||this).sharedStartState={pinching:!0},r.sharedEndState={pinching:!1},r.onWheel=function(e){e.ctrlKey&&(r.controller.config.passiveEvents||e.preventDefault(),r.timeoutHandler(e))},r}o(t,e);var n=t.prototype;return n.getPayloadFromEvent=function(e){var t=f(e),n=t.xy[1],r=i(t,["xy"]),o=this.state.da,a=o[1];return{values:[o[0]-n,void 0!==a?a:0],gesturePayload:{origin:[e.clientX,e.clientY]},sharedPayload:r}},n.getEventBindings=function(){return[["onWheel",this.onWheel]]},t}(F),z=function(e){function t(t,n){var r;return(r=e.call(this,"pinch",t,n)||this).sharedStartState={pinching:!0,down:!0,touches:2},r.sharedEndState={pinching:!1,down:!1,touches:0},r.onPinchStart=function(e){r.enabled&&(e.preventDefault(),r.onStart(e,{origin:r.origin?r.origin:[e.clientX,e.clientY],cancel:function(){return r.onCancel(e)}}))},r.onPinchChange=function(e){var t=r.state;!t.canceled&&t.active&&(e.preventDefault(),r.onChange(e,{cancel:function(){return r.onCancel(e)}}))},r.onGestureEnd=function(e){r.onEnd(e),e.preventDefault(),r.origin=void 0},r.updateTouchData=function(e){if(r.enabled&&2===e.touches.length){var t=y(e);r.origin=t.origin}},r}o(t,e);var n=t.prototype;return n.getPayloadFromEvent=function(e){return{values:[260*e.scale,e.rotation]}},n.getEventBindings=function(){return[["onGestureStart",this.onPinchStart],["onGestureChange",this.onPinchChange],[["onGestureEnd","onTouchCancel"],this.onGestureEnd],[["onTouchStart","onTouchMove"],this.updateTouchData]]},t}(F),X=function(e,n){var o=this;this.handlers=e,this.config=n,this.state=x,this.timeouts={},this.bindings={},this.domListeners=[],this.windowListeners={},this.clean=function(){o.cleanOnBind(),Object.values(o.timeouts).forEach(clearTimeout),Object.keys(o.windowListeners).forEach(function(e){return o.removeWindowListeners(e)})},this.cleanOnBind=function(){o.bindings={};var e=o.config.domTarget;e&&(h(e,o.domListeners,o.config.event),o.domListeners=[])},this.updateState=function(e,t,n){var i,a=r({},o.state[n],{},t);"da"in a?a.da=a.values:"xy"in a&&(a.xy=a.values),o.state=r({},o.state,((i={shared:r({},o.state.shared,{},e)})[n]=a,i))},this.fireGestureHandler=function(e,n){var i=P[e],a=i.stateKey,s=i.handlerKey,c=r({},o.state.shared,{},o.state[a]);if(c.event&&(c.event.gesture=e),n===t.OnStart){var u=o.handlers[s+"Start"];u&&u(c)}var l=o.handlers[s];if(l){var d=l(c);o.state[a].memo=void 0!==d?d:o.state[a].memo}if(n===t.OnEnd){var h=o.handlers[s+"End"];h&&h(c)}},this.addWindowListeners=function(e,t){o.config.window&&(o.windowListeners[e]=t,d(o.config.window,t,o.config.event))},this.removeWindowListeners=function(e){if(o.config.window){var t=o.windowListeners[e];t&&(h(o.config.window,t,o.config.event),delete o.windowListeners[e])}},this.addRecognizer=function(e){e.getEventBindings().map(o.addEventBindings)},this.addEventBindings=function(e){var t=e[0],n=e[1];(Array.isArray(t)?t:[t]).forEach(function(e){o.bindings[e]=o.bindings[e]?[].concat(o.bindings[e],[n]):[n]})},this.addDomTargetListeners=function(){var e=o.config.domTarget;Object.entries(o.bindings).forEach(function(e){var t=e[1];o.domListeners.push([e[0].substr(2).toLowerCase(),s.apply(void 0,t)])}),d(e,o.domListeners,o.config.event)},this.getBindings=function(){var e={},t=o.config.event.capture?"Capture":"";return Object.entries(o.bindings).forEach(function(n){var r=n[0],o=n[1],i=Array.isArray(o)?o:[o];e[r+t]=s.apply(void 0,i)}),e},this.bind=function(){var e=o.config.domTarget,t=r({},o.handlers);o.cleanOnBind();for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return o.actions.has("onDrag")&&(o.addRecognizer(new W(o,i)),delete t.onDrag,delete t.onDragStart,delete t.onDragEnd),o.actions.has("onScroll")&&(o.addRecognizer(new G(o,i)),delete t.onScroll,delete t.onScrollStart,delete t.onScrollEnd),o.actions.has("onWheel")&&(o.addRecognizer(new H(o,i)),delete t.onWheel,delete t.onWheelStart,delete t.onWheelEnd),o.actions.has("onMove")&&(o.addRecognizer(new B(o,i)),delete t.onMove,delete t.onMoveStart,delete t.onMoveEnd),o.actions.has("onHover")&&(o.addRecognizer(new j(o,i)),delete t.onHover),o.actions.has("onPinch")&&(e&&function(){try{return"constructor"in GestureEvent}catch(e){return!1}}()?o.addRecognizer(new z(o,i)):(o.addRecognizer(new A(o,i)),o.addRecognizer(new R(o,i))),delete t.onPinch,delete t.onPinchStart,delete t.onPinchEnd),Object.entries(t).map(function(e){o.addEventBindings([e[0],e[1]])}),e?(o.addDomTargetListeners(),o.clean):o.getBindings()},this.actions=new Set(Object.keys(this.handlers).map(function(e){return e.replace(/End|Start/,"")}))};function Y(e,t){var r=n.useRef();return r.current||(r.current=new X(e,k(t))),n.useEffect(function(){r.current.config=k(t),r.current.handlers=e},[e,t]),n.useEffect(function(){return r.current.clean},[]),r.current.bind}function k(e){var t=r({},b,{},e),n=t.domTarget;return t.domTarget=n&&"current"in n?n.current:n,t.passiveEvents=!t.domTarget||void 0===t.event.passive||t.event.passive,t}exports.addV=c,exports.subV=u,exports.useDrag=function(e,t){return Y({onDrag:e},t)},exports.useGesture=Y,exports.useHover=function(e,t){return Y({onHover:e},t)},exports.useMove=function(e,t){return Y({onMove:e},t)},exports.usePinch=function(e,t){return Y({onPinch:e},t)},exports.useScroll=function(e,t){return Y({onScroll:e},t)},exports.useWheel=function(e,t){return Y({onWheel:e},t)};
//# sourceMappingURL=react-use-gesture.cjs.production.min.js.map
