var r=require("bech32"),e=require("crypto-addr-codec");function n(r,n){return function(o){var t;switch(o.readUInt8(0)){case 118:if(169!==o.readUInt8(1)||136!==o.readUInt8(o.length-2)||172!==o.readUInt8(o.length-1))throw Error("Unrecognised address format");return t=Buffer.concat([Buffer.from([r]),o.slice(3,3+o.readUInt8(2))]),e.bs58Encode(t);case 169:if(135!==o.readUInt8(o.length-1))throw Error("Unrecognised address format");return t=Buffer.concat([Buffer.from([n]),o.slice(2,2+o.readUInt8(1))]),e.bs58Encode(t);default:throw Error("Unrecognised address format")}}}function o(r,n){return function(o){var t=e.bs58Decode(o),c=t.readUInt8(0);if(r.includes(c))return Buffer.concat([Buffer.from([118,169,20]),t.slice(1),Buffer.from([136,172])]);if(n.includes(c))return Buffer.concat([Buffer.from([169,20]),t.slice(1),Buffer.from([135])]);throw Error("Unrecognised address format")}}var t=function(r,e,t,c){return{coinType:e,decoder:o(t,c),encoder:n(t[0],c[0]),name:r}};function c(e,o,t){var c=function(e){return function(n){var o=n.readUInt8(0);if(o>=81&&o<=96)o-=80;else if(0!==o)throw Error("Unrecognised address format");var t=[o].concat(r.toWords(n.slice(2,n.readUInt8(1)+2)));return r.encode(e,t)}}(e),d=n(o,t);return function(r){try{return d(r)}catch(e){return c(r)}}}function d(e,n,t){var c=function(e){return function(n){var o=r.decode(n),t=o.words;if(o.prefix!==e)throw Error("Unexpected human-readable part in bech32 encoded address");var c=r.fromWords(t.slice(1)),d=t[0];return d>0&&(d+=80),Buffer.concat([Buffer.from([d,c.length]),Buffer.from(c)])}}(e),d=o(n,t);return function(r){return r.toLowerCase().startsWith(e+"1")?c(r):d(r)}}var f=function(r,e,n,o,t){return{coinType:e,decoder:d(n,o,t),encoder:c(n,o[0],t[0]),name:r}};function a(r){return function(n){return e.toChecksumAddress(n.toString("hex"),r||null)}}function i(r){return function(n){var o=e.stripHexPrefix(n);if(!e.isValidChecksumAddress(n,r||null)&&o!==o.toLowerCase()&&o!==o.toUpperCase())throw Error("Invalid address checksum");return Buffer.from(e.stripHexPrefix(n),"hex")}}var u=function(r,e,n){return{coinType:e,decoder:i(n),encoder:a(n),name:r}};function s(e){return function(n){return r.encode(e,r.toWords(n))}}var m=function(e,n,o){return{coinType:n,decoder:(t=o,function(e){var n=r.decode(e),o=n.words;if(n.prefix!==t)throw Error("Unrecognised address format");return Buffer.from(r.fromWords(o))}),encoder:s(o),name:e};var t},h=[f("BTC",0,"bc",[0],[5]),f("LTC",2,"ltc",[48],[50,5]),t("DOGE",3,[30],[22]),t("DASH",5,[76],[16]),f("MONA",22,"mona",[50],[55,5]),{coinType:43,decoder:function(r){if(!e.isValid(r))throw Error("Unrecognised address format");var n=r.toString().toUpperCase().replace(/-/g,"");return e.b32decode(n)},encoder:function(r){return e.b32encode(e.hex2a(r.toString("hex")))},name:"XEM"},u("ETH",60),u("ETC",61),m("ATOM",118,"cosmos"),u("RSK",137,30),{coinType:144,decoder:function(r){return e.codec.decodeChecked(r)},encoder:function(r){return e.codec.encodeChecked(r)},name:"XRP"},{coinType:145,decoder:function(r){var n=o([0],[5]);try{return n(r)}catch(n){return function(r){var n=e.cashaddrDecode(r),o=n.type,t=n.hash;if(0===o)return Buffer.concat([Buffer.from([118,169,20]),Buffer.from(t),Buffer.from([136,172])]);if(1===o)return Buffer.concat([Buffer.from([169,20]),Buffer.from(t),Buffer.from([135])]);throw Error("Unrecognised address format")}(r)}},encoder:function(r){switch(r.readUInt8(0)){case 118:if(169!==r.readUInt8(1)||136!==r.readUInt8(r.length-2)||172!==r.readUInt8(r.length-1))throw Error("Unrecognised address format");return e.cashaddrEncode("bitcoincash",0,r.slice(3,3+r.readUInt8(2)));case 169:if(135!==r.readUInt8(r.length-1))throw Error("Unrecognised address format");return e.cashaddrEncode("bitcoincash",1,r.slice(2,2+r.readUInt8(1)));default:throw Error("Unrecognised address format")}},name:"BCH"},{coinType:148,decoder:function(r){return e.decodeCheck("ed25519PublicKey",r)},encoder:function(r){return e.encodeCheck("ed25519PublicKey",r)},name:"XLM"},{coinType:194,decoder:function(r){if(!e.eosPublicKey.isValid(r))throw Error("Unrecognised address format");return e.eosPublicKey(r).toBuffer()},encoder:function(r){if(!e.eosPublicKey.isValid(r))throw Error("Unrecognised address format");return e.eosPublicKey.fromHex(r).toString()},name:"EOS"},{coinType:195,decoder:e.bs58Decode,encoder:e.bs58Encode,name:"TRX"},{coinType:434,decoder:function(r){return new Buffer(e.ss58Decode(r))},encoder:function(r){return e.ss58Encode(Uint8Array.from(r),2)},name:"KSM"},{coinType:714,decoder:function(e){var n=r.decode(e),o=n.words;if("bnb"!==n.prefix)throw Error("Unrecognised address format");return Buffer.from(r.fromWords(o))},encoder:function(e){return r.encode("bnb",r.toWords(e))},name:"BNB"},u("XDAI",700),m("BNB",714,"bnb")],l=Object.assign.apply(Object,[{}].concat(h.map(function(r){var e;return(e={})[r.name]=r,e}))),p=Object.assign.apply(Object,[{}].concat(h.map(function(r){var e;return(e={})[r.coinType]=r,e})));exports.formatsByCoinType=p,exports.formatsByName=l;
//# sourceMappingURL=index.js.map
