import{encode as r,decode as e,fromWords as n,toWords as o}from"bech32";import{bs58Decode as t,bs58Encode as c,stripHexPrefix as f,isValidChecksumAddress as a,toChecksumAddress as d,codec as u,cashaddrEncode as i,b32encode as s,hex2a as m,isValid as h,b32decode as U,eosPublicKey as l,ss58Encode as p,ss58Decode as B,decodeCheck as g,encodeCheck as w,cashaddrDecode as v}from"crypto-addr-codec";function y(r,e){return function(n){var o;switch(n.readUInt8(0)){case 118:if(169!==n.readUInt8(1)||136!==n.readUInt8(n.length-2)||172!==n.readUInt8(n.length-1))throw Error("Unrecognised address format");return o=Buffer.concat([Buffer.from([r]),n.slice(3,3+n.readUInt8(2))]),c(o);case 169:if(135!==n.readUInt8(n.length-1))throw Error("Unrecognised address format");return o=Buffer.concat([Buffer.from([e]),n.slice(2,2+n.readUInt8(1))]),c(o);default:throw Error("Unrecognised address format")}}}function E(r,e){return function(n){var o=t(n),c=o.readUInt8(0);if(r.includes(c))return Buffer.concat([Buffer.from([118,169,20]),o.slice(1),Buffer.from([136,172])]);if(e.includes(c))return Buffer.concat([Buffer.from([169,20]),o.slice(1),Buffer.from([135])]);throw Error("Unrecognised address format")}}var I=function(r,e,n,o){return{coinType:e,decoder:E(n,o),encoder:y(n[0],o[0]),name:r}};function T(e,n,t){var c=function(e){return function(n){var t=n.readUInt8(0);if(t>=81&&t<=96)t-=80;else if(0!==t)throw Error("Unrecognised address format");var c=[t].concat(o(n.slice(2,n.readUInt8(1)+2)));return r(e,c)}}(e),f=y(n,t);return function(r){try{return f(r)}catch(e){return c(r)}}}function b(r,o,t){var c=function(r){return function(o){var t=e(o),c=t.words;if(t.prefix!==r)throw Error("Unexpected human-readable part in bech32 encoded address");var f=n(c.slice(1)),a=c[0];return a>0&&(a+=80),Buffer.concat([Buffer.from([a,f.length]),Buffer.from(f)])}}(r),f=E(o,t);return function(e){return e.toLowerCase().startsWith(r+"1")?c(e):f(e)}}var C=function(r,e,n,o,t){return{coinType:e,decoder:b(n,o,t),encoder:T(n,o[0],t[0]),name:r}};function x(r){return function(e){return d(e.toString("hex"),r||null)}}function O(r){return function(e){var n=f(e);if(!a(e,r||null)&&n!==n.toLowerCase()&&n!==n.toUpperCase())throw Error("Invalid address checksum");return Buffer.from(f(e),"hex")}}var S=function(r,e,n){return{coinType:e,decoder:O(n),encoder:x(n),name:r}};function A(e){return function(n){return r(e,o(n))}}var M=function(r,o,t){return{coinType:o,decoder:(c=t,function(r){var o=e(r),t=o.words;if(o.prefix!==c)throw Error("Unrecognised address format");return Buffer.from(n(t))}),encoder:A(t),name:r};var c},X=[C("BTC",0,"bc",[0],[5]),C("LTC",2,"ltc",[48],[50,5]),I("DOGE",3,[30],[22]),I("DASH",5,[76],[16]),C("MONA",22,"mona",[50],[55,5]),{coinType:43,decoder:function(r){if(!h(r))throw Error("Unrecognised address format");var e=r.toString().toUpperCase().replace(/-/g,"");return U(e)},encoder:function(r){return s(m(r.toString("hex")))},name:"XEM"},S("ETH",60),S("ETC",61),M("ATOM",118,"cosmos"),S("RSK",137,30),{coinType:144,decoder:function(r){return u.decodeChecked(r)},encoder:function(r){return u.encodeChecked(r)},name:"XRP"},{coinType:145,decoder:function(r){var e=E([0],[5]);try{return e(r)}catch(e){return function(r){var e=v(r),n=e.type,o=e.hash;if(0===n)return Buffer.concat([Buffer.from([118,169,20]),Buffer.from(o),Buffer.from([136,172])]);if(1===n)return Buffer.concat([Buffer.from([169,20]),Buffer.from(o),Buffer.from([135])]);throw Error("Unrecognised address format")}(r)}},encoder:function(r){switch(r.readUInt8(0)){case 118:if(169!==r.readUInt8(1)||136!==r.readUInt8(r.length-2)||172!==r.readUInt8(r.length-1))throw Error("Unrecognised address format");return i("bitcoincash",0,r.slice(3,3+r.readUInt8(2)));case 169:if(135!==r.readUInt8(r.length-1))throw Error("Unrecognised address format");return i("bitcoincash",1,r.slice(2,2+r.readUInt8(1)));default:throw Error("Unrecognised address format")}},name:"BCH"},{coinType:148,decoder:function(r){return g("ed25519PublicKey",r)},encoder:function(r){return w("ed25519PublicKey",r)},name:"XLM"},{coinType:194,decoder:function(r){if(!l.isValid(r))throw Error("Unrecognised address format");return l(r).toBuffer()},encoder:function(r){if(!l.isValid(r))throw Error("Unrecognised address format");return l.fromHex(r).toString()},name:"EOS"},{coinType:195,decoder:t,encoder:c,name:"TRX"},{coinType:434,decoder:function(r){return new Buffer(B(r))},encoder:function(r){return p(Uint8Array.from(r),2)},name:"KSM"},{coinType:714,decoder:function(r){var o=e(r),t=o.words;if("bnb"!==o.prefix)throw Error("Unrecognised address format");return Buffer.from(n(t))},encoder:function(e){return r("bnb",o(e))},name:"BNB"},S("XDAI",700),M("BNB",714,"bnb")],j=Object.assign.apply(Object,[{}].concat(X.map(function(r){var e;return(e={})[r.name]=r,e}))),H=Object.assign.apply(Object,[{}].concat(X.map(function(r){var e;return(e={})[r.coinType]=r,e})));export{H as formatsByCoinType,j as formatsByName};
//# sourceMappingURL=index.modern.js.map
