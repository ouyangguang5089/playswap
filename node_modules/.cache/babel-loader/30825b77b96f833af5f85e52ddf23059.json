{"ast":null,"code":"import _regeneratorRuntime from\"/projects/testswap/uniswap-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/projects/testswap/uniswap-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/projects/testswap/uniswap-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/projects/testswap/uniswap-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  padding: 1rem;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState}from'react';import Modal from'../Modal';import{AutoColumn}from'../Column';import styled from'styled-components';import{RowBetween}from'../Row';import{TYPE,CloseIcon}from'../../theme';import{ButtonError}from'../Button';import{useStakingContract}from'../../hooks/useContract';import{SubmittedView,LoadingView}from'../ModalViews';import{useTransactionAdder}from'../../state/transactions/hooks';import{useActiveWeb3React}from'../../hooks';var ContentWrapper=styled(AutoColumn)(_templateObject());export default function ClaimRewardModal(_ref){var _stakingInfo$earnedAm,_error2,_stakingInfo$earnedAm2;var isOpen=_ref.isOpen,onDismiss=_ref.onDismiss,stakingInfo=_ref.stakingInfo;var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account;// monitor call to help UI loading state\nvar addTransaction=useTransactionAdder();var _useState=useState(),_useState2=_slicedToArray(_useState,2),hash=_useState2[0],setHash=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),attempting=_useState4[0],setAttempting=_useState4[1];function wrappedOnDismiss(){setHash(undefined);setAttempting(false);onDismiss();}var stakingContract=useStakingContract(stakingInfo.stakingRewardAddress);function onClaimReward(){return _onClaimReward.apply(this,arguments);}function _onClaimReward(){_onClaimReward=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(stakingContract&&(stakingInfo===null||stakingInfo===void 0?void 0:stakingInfo.stakedAmount))){_context.next=4;break;}setAttempting(true);_context.next=4;return stakingContract.getReward({gasLimit:350000}).then(function(response){addTransaction(response,{summary:\"Claim accumulated UNI rewards\"});setHash(response.hash);}).catch(function(error){setAttempting(false);console.log(error);});case 4:case\"end\":return _context.stop();}}},_callee);}));return _onClaimReward.apply(this,arguments);}var error;if(!account){error='Connect Wallet';}if(!(stakingInfo===null||stakingInfo===void 0?void 0:stakingInfo.stakedAmount)){var _error;error=(_error=error)!==null&&_error!==void 0?_error:'Enter an amount';}return/*#__PURE__*/React.createElement(Modal,{isOpen:isOpen,onDismiss:wrappedOnDismiss,maxHeight:90},!attempting&&!hash&&/*#__PURE__*/React.createElement(ContentWrapper,{gap:\"lg\"},/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(TYPE.mediumHeader,null,\"Claim\"),/*#__PURE__*/React.createElement(CloseIcon,{onClick:wrappedOnDismiss})),(stakingInfo===null||stakingInfo===void 0?void 0:stakingInfo.earnedAmount)&&/*#__PURE__*/React.createElement(AutoColumn,{justify:\"center\",gap:\"md\"},/*#__PURE__*/React.createElement(TYPE.body,{fontWeight:600,fontSize:36},stakingInfo===null||stakingInfo===void 0?void 0:(_stakingInfo$earnedAm=stakingInfo.earnedAmount)===null||_stakingInfo$earnedAm===void 0?void 0:_stakingInfo$earnedAm.toSignificant(6)),/*#__PURE__*/React.createElement(TYPE.body,null,\"Unclaimed UNI\")),/*#__PURE__*/React.createElement(TYPE.subHeader,{style:{textAlign:'center'}},\"When you claim without withdrawing your liquidity remains in the mining pool.\"),/*#__PURE__*/React.createElement(ButtonError,{disabled:!!error,error:!!error&&!!(stakingInfo===null||stakingInfo===void 0?void 0:stakingInfo.stakedAmount),onClick:onClaimReward},(_error2=error)!==null&&_error2!==void 0?_error2:'Claim')),attempting&&!hash&&/*#__PURE__*/React.createElement(LoadingView,{onDismiss:wrappedOnDismiss},/*#__PURE__*/React.createElement(AutoColumn,{gap:\"12px\",justify:'center'},/*#__PURE__*/React.createElement(TYPE.body,{fontSize:20},\"Claiming \",stakingInfo===null||stakingInfo===void 0?void 0:(_stakingInfo$earnedAm2=stakingInfo.earnedAmount)===null||_stakingInfo$earnedAm2===void 0?void 0:_stakingInfo$earnedAm2.toSignificant(6),\" UNI\"))),hash&&/*#__PURE__*/React.createElement(SubmittedView,{onDismiss:wrappedOnDismiss,hash:hash},/*#__PURE__*/React.createElement(AutoColumn,{gap:\"12px\",justify:'center'},/*#__PURE__*/React.createElement(TYPE.largeHeader,null,\"Transaction Submitted\"),/*#__PURE__*/React.createElement(TYPE.body,{fontSize:20},\"Claimed UNI!\"))));}","map":{"version":3,"sources":["/projects/testswap/uniswap-interface/src/components/earn/ClaimRewardModal.tsx"],"names":["React","useState","Modal","AutoColumn","styled","RowBetween","TYPE","CloseIcon","ButtonError","useStakingContract","SubmittedView","LoadingView","useTransactionAdder","useActiveWeb3React","ContentWrapper","ClaimRewardModal","isOpen","onDismiss","stakingInfo","account","addTransaction","hash","setHash","attempting","setAttempting","wrappedOnDismiss","undefined","stakingContract","stakingRewardAddress","onClaimReward","stakedAmount","getReward","gasLimit","then","response","summary","catch","error","console","log","earnedAmount","toSignificant","textAlign"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport Modal from '../Modal'\nimport { AutoColumn } from '../Column'\nimport styled from 'styled-components'\nimport { RowBetween } from '../Row'\nimport { TYPE, CloseIcon } from '../../theme'\nimport { ButtonError } from '../Button'\nimport { StakingInfo } from '../../state/stake/hooks'\nimport { useStakingContract } from '../../hooks/useContract'\nimport { SubmittedView, LoadingView } from '../ModalViews'\nimport { TransactionResponse } from '@ethersproject/providers'\nimport { useTransactionAdder } from '../../state/transactions/hooks'\nimport { useActiveWeb3React } from '../../hooks'\n\nconst ContentWrapper = styled(AutoColumn)`\n  width: 100%;\n  padding: 1rem;\n`\n\ninterface StakingModalProps {\n  isOpen: boolean\n  onDismiss: () => void\n  stakingInfo: StakingInfo\n}\n\nexport default function ClaimRewardModal({ isOpen, onDismiss, stakingInfo }: StakingModalProps) {\n  const { account } = useActiveWeb3React()\n\n  // monitor call to help UI loading state\n  const addTransaction = useTransactionAdder()\n  const [hash, setHash] = useState<string | undefined>()\n  const [attempting, setAttempting] = useState(false)\n\n  function wrappedOnDismiss() {\n    setHash(undefined)\n    setAttempting(false)\n    onDismiss()\n  }\n\n  const stakingContract = useStakingContract(stakingInfo.stakingRewardAddress)\n\n  async function onClaimReward() {\n    if (stakingContract && stakingInfo?.stakedAmount) {\n      setAttempting(true)\n      await stakingContract\n        .getReward({ gasLimit: 350000 })\n        .then((response: TransactionResponse) => {\n          addTransaction(response, {\n            summary: `Claim accumulated UNI rewards`\n          })\n          setHash(response.hash)\n        })\n        .catch((error: any) => {\n          setAttempting(false)\n          console.log(error)\n        })\n    }\n  }\n\n  let error: string | undefined\n  if (!account) {\n    error = 'Connect Wallet'\n  }\n  if (!stakingInfo?.stakedAmount) {\n    error = error ?? 'Enter an amount'\n  }\n\n  return (\n    <Modal isOpen={isOpen} onDismiss={wrappedOnDismiss} maxHeight={90}>\n      {!attempting && !hash && (\n        <ContentWrapper gap=\"lg\">\n          <RowBetween>\n            <TYPE.mediumHeader>Claim</TYPE.mediumHeader>\n            <CloseIcon onClick={wrappedOnDismiss} />\n          </RowBetween>\n          {stakingInfo?.earnedAmount && (\n            <AutoColumn justify=\"center\" gap=\"md\">\n              <TYPE.body fontWeight={600} fontSize={36}>\n                {stakingInfo?.earnedAmount?.toSignificant(6)}\n              </TYPE.body>\n              <TYPE.body>Unclaimed UNI</TYPE.body>\n            </AutoColumn>\n          )}\n          <TYPE.subHeader style={{ textAlign: 'center' }}>\n            When you claim without withdrawing your liquidity remains in the mining pool.\n          </TYPE.subHeader>\n          <ButtonError disabled={!!error} error={!!error && !!stakingInfo?.stakedAmount} onClick={onClaimReward}>\n            {error ?? 'Claim'}\n          </ButtonError>\n        </ContentWrapper>\n      )}\n      {attempting && !hash && (\n        <LoadingView onDismiss={wrappedOnDismiss}>\n          <AutoColumn gap=\"12px\" justify={'center'}>\n            <TYPE.body fontSize={20}>Claiming {stakingInfo?.earnedAmount?.toSignificant(6)} UNI</TYPE.body>\n          </AutoColumn>\n        </LoadingView>\n      )}\n      {hash && (\n        <SubmittedView onDismiss={wrappedOnDismiss} hash={hash}>\n          <AutoColumn gap=\"12px\" justify={'center'}>\n            <TYPE.largeHeader>Transaction Submitted</TYPE.largeHeader>\n            <TYPE.body fontSize={20}>Claimed UNI!</TYPE.body>\n          </AutoColumn>\n        </SubmittedView>\n      )}\n    </Modal>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}