{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar bytes_1 = require(\"@ethersproject/bytes\");\n\nvar sha2_1 = require(\"@ethersproject/sha2\");\n\nfunction pbkdf2(password, salt, iterations, keylen, hashAlgorithm) {\n  password = bytes_1.arrayify(password);\n  salt = bytes_1.arrayify(salt);\n  var hLen;\n  var l = 1;\n  var DK = new Uint8Array(keylen);\n  var block1 = new Uint8Array(salt.length + 4);\n  block1.set(salt); //salt.copy(block1, 0, 0, salt.length)\n\n  var r;\n  var T;\n\n  for (var i = 1; i <= l; i++) {\n    //block1.writeUInt32BE(i, salt.length)\n    block1[salt.length] = i >> 24 & 0xff;\n    block1[salt.length + 1] = i >> 16 & 0xff;\n    block1[salt.length + 2] = i >> 8 & 0xff;\n    block1[salt.length + 3] = i & 0xff; //let U = createHmac(password).update(block1).digest();\n\n    var U = bytes_1.arrayify(sha2_1.computeHmac(hashAlgorithm, password, block1));\n\n    if (!hLen) {\n      hLen = U.length;\n      T = new Uint8Array(hLen);\n      l = Math.ceil(keylen / hLen);\n      r = keylen - (l - 1) * hLen;\n    } //U.copy(T, 0, 0, hLen)\n\n\n    T.set(U);\n\n    for (var j = 1; j < iterations; j++) {\n      //U = createHmac(password).update(U).digest();\n      U = bytes_1.arrayify(sha2_1.computeHmac(hashAlgorithm, password, U));\n\n      for (var k = 0; k < hLen; k++) {\n        T[k] ^= U[k];\n      }\n    }\n\n    var destPos = (i - 1) * hLen;\n    var len = i === l ? r : hLen; //T.copy(DK, destPos, 0, len)\n\n    DK.set(bytes_1.arrayify(T).slice(0, len), destPos);\n  }\n\n  return bytes_1.hexlify(DK);\n}\n\nexports.pbkdf2 = pbkdf2;","map":{"version":3,"sources":["../src.ts/browser.ts"],"names":[],"mappings":"AAAA;;;;;;AAEA,IAAA,OAAA,GAAA,OAAA,CAAA,sBAAA,CAAA;;AACA,IAAA,MAAA,GAAA,OAAA,CAAA,qBAAA,CAAA;;AAEA,SAAgB,MAAhB,CAAuB,QAAvB,EAA4C,IAA5C,EAA6D,UAA7D,EAAiF,MAAjF,EAAiG,aAAjG,EAAkI;AAC9H,EAAA,QAAQ,GAAG,OAAA,CAAA,QAAA,CAAS,QAAT,CAAX;AACA,EAAA,IAAI,GAAG,OAAA,CAAA,QAAA,CAAS,IAAT,CAAP;AACA,MAAI,IAAJ;AACA,MAAI,CAAC,GAAG,CAAR;AACA,MAAM,EAAE,GAAG,IAAI,UAAJ,CAAe,MAAf,CAAX;AACA,MAAM,MAAM,GAAG,IAAI,UAAJ,CAAe,IAAI,CAAC,MAAL,GAAc,CAA7B,CAAf;AACA,EAAA,MAAM,CAAC,GAAP,CAAW,IAAX,EAP8H,CAQ9H;;AAEA,MAAI,CAAJ;AACA,MAAI,CAAJ;;AAEA,OAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,IAAI,CAArB,EAAwB,CAAC,EAAzB,EAA6B;AACzB;AACA,IAAA,MAAM,CAAC,IAAI,CAAC,MAAN,CAAN,GAAuB,CAAC,IAAI,EAAN,GAAY,IAAlC;AACA,IAAA,MAAM,CAAC,IAAI,CAAC,MAAL,GAAc,CAAf,CAAN,GAA2B,CAAC,IAAI,EAAN,GAAY,IAAtC;AACA,IAAA,MAAM,CAAC,IAAI,CAAC,MAAL,GAAc,CAAf,CAAN,GAA2B,CAAC,IAAI,CAAN,GAAW,IAArC;AACA,IAAA,MAAM,CAAC,IAAI,CAAC,MAAL,GAAc,CAAf,CAAN,GAA0B,CAAC,GAAG,IAA9B,CALyB,CAOzB;;AACA,QAAI,CAAC,GAAG,OAAA,CAAA,QAAA,CAAS,MAAA,CAAA,WAAA,CAAY,aAAZ,EAA2B,QAA3B,EAAqC,MAArC,CAAT,CAAR;;AAEA,QAAI,CAAC,IAAL,EAAW;AACP,MAAA,IAAI,GAAG,CAAC,CAAC,MAAT;AACA,MAAA,CAAC,GAAG,IAAI,UAAJ,CAAe,IAAf,CAAJ;AACA,MAAA,CAAC,GAAG,IAAI,CAAC,IAAL,CAAU,MAAM,GAAG,IAAnB,CAAJ;AACA,MAAA,CAAC,GAAG,MAAM,GAAG,CAAC,CAAC,GAAG,CAAL,IAAU,IAAvB;AACH,KAfwB,CAiBzB;;;AACA,IAAA,CAAC,CAAC,GAAF,CAAM,CAAN;;AAGA,SAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,UAApB,EAAgC,CAAC,EAAjC,EAAqC;AACjC;AACA,MAAA,CAAC,GAAG,OAAA,CAAA,QAAA,CAAS,MAAA,CAAA,WAAA,CAAY,aAAZ,EAA2B,QAA3B,EAAqC,CAArC,CAAT,CAAJ;;AACA,WAAK,IAAI,CAAC,GAAG,CAAb,EAAgB,CAAC,GAAG,IAApB,EAA0B,CAAC,EAA3B;AAA+B,QAAA,CAAC,CAAC,CAAD,CAAD,IAAQ,CAAC,CAAC,CAAD,CAAT;AAA/B;AACH;;AAGD,QAAM,OAAO,GAAG,CAAC,CAAC,GAAG,CAAL,IAAU,IAA1B;AACA,QAAM,GAAG,GAAI,CAAC,KAAK,CAAN,GAAU,CAAV,GAAc,IAA3B,CA7ByB,CA8BzB;;AACA,IAAA,EAAE,CAAC,GAAH,CAAO,OAAA,CAAA,QAAA,CAAS,CAAT,EAAY,KAAZ,CAAkB,CAAlB,EAAqB,GAArB,CAAP,EAAkC,OAAlC;AACH;;AAED,SAAO,OAAA,CAAA,OAAA,CAAQ,EAAR,CAAP;AACH;;AAhDD,OAAA,CAAA,MAAA,GAAA,MAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar bytes_1 = require(\"@ethersproject/bytes\");\nvar sha2_1 = require(\"@ethersproject/sha2\");\nfunction pbkdf2(password, salt, iterations, keylen, hashAlgorithm) {\n    password = bytes_1.arrayify(password);\n    salt = bytes_1.arrayify(salt);\n    var hLen;\n    var l = 1;\n    var DK = new Uint8Array(keylen);\n    var block1 = new Uint8Array(salt.length + 4);\n    block1.set(salt);\n    //salt.copy(block1, 0, 0, salt.length)\n    var r;\n    var T;\n    for (var i = 1; i <= l; i++) {\n        //block1.writeUInt32BE(i, salt.length)\n        block1[salt.length] = (i >> 24) & 0xff;\n        block1[salt.length + 1] = (i >> 16) & 0xff;\n        block1[salt.length + 2] = (i >> 8) & 0xff;\n        block1[salt.length + 3] = i & 0xff;\n        //let U = createHmac(password).update(block1).digest();\n        var U = bytes_1.arrayify(sha2_1.computeHmac(hashAlgorithm, password, block1));\n        if (!hLen) {\n            hLen = U.length;\n            T = new Uint8Array(hLen);\n            l = Math.ceil(keylen / hLen);\n            r = keylen - (l - 1) * hLen;\n        }\n        //U.copy(T, 0, 0, hLen)\n        T.set(U);\n        for (var j = 1; j < iterations; j++) {\n            //U = createHmac(password).update(U).digest();\n            U = bytes_1.arrayify(sha2_1.computeHmac(hashAlgorithm, password, U));\n            for (var k = 0; k < hLen; k++)\n                T[k] ^= U[k];\n        }\n        var destPos = (i - 1) * hLen;\n        var len = (i === l ? r : hLen);\n        //T.copy(DK, destPos, 0, len)\n        DK.set(bytes_1.arrayify(T).slice(0, len), destPos);\n    }\n    return bytes_1.hexlify(DK);\n}\nexports.pbkdf2 = pbkdf2;\n//# sourceMappingURL=browser.js.map"]},"metadata":{},"sourceType":"script"}