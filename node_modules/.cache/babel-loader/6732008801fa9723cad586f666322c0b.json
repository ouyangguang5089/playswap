{"ast":null,"code":"import _slicedToArray from\"/projects/testswap/uniswap-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/projects/testswap/uniswap-interface/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject11(){var data=_taggedTemplateLiteral([\"\\n  border: 1px solid \",\";\\n  padding: 16px 12px;\\n  border-radius: 12px;\\n  display: flex;\\n  flex-direction: column;\\n  justify-content: center;\\n  align-items: center;\\n\"]);_templateObject11=function _templateObject11(){return data;};return data;}function _templateObject10(){var data=_taggedTemplateLiteral([\"\\n    width: 48%;\\n  \"]);_templateObject10=function _templateObject10(){return data;};return data;}function _templateObject9(){var data=_taggedTemplateLiteral([\"\\n  width: fit-content;\\n  \",\";\\n\"]);_templateObject9=function _templateObject9(){return data;};return data;}function _templateObject8(){var data=_taggedTemplateLiteral([\"\\n    width: 48%;\\n  \"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n  width: fit-content;\\n  \",\";\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n    width: 100%;\\n    flex-direction: row-reverse;\\n    justify-content: space-between;\\n  \"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  gap: 8px;\\n  \",\";\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n    flex-wrap: wrap;\\n    gap: 12px;\\n    width: 100%;\\n    flex-direction: column-reverse;\\n  \"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  \",\";\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  background: radial-gradient(76.02% 75.41% at 1.84% 0%, #27ae60 0%, #000000 100%);\\n  overflow: hidden;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  max-width: 640px;\\n  width: 100%;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useContext,useMemo}from'react';import styled,{ThemeContext}from'styled-components';import{JSBI}from'@uniswap/sdk';import{Link}from'react-router-dom';import{SwapPoolTabs}from'../../components/NavigationTabs';import FullPositionCard from'../../components/PositionCard';import{useUserHasLiquidityInAllTokens}from'../../data/V1';import{useTokenBalancesWithLoadingIndicator}from'../../state/wallet/hooks';import{StyledInternalLink,ExternalLink,TYPE,HideSmall}from'../../theme';import{Text}from'rebass';import Card from'../../components/Card';import{RowBetween,RowFixed}from'../../components/Row';import{ButtonPrimary,ButtonSecondary}from'../../components/Button';import{AutoColumn}from'../../components/Column';import{useActiveWeb3React}from'../../hooks';import{usePairs}from'../../data/Reserves';import{toV2LiquidityToken,useTrackedTokenPairs}from'../../state/user/hooks';import{Dots}from'../../components/swap/styleds';import{CardSection,DataCard,CardNoise,CardBGImage}from'../../components/earn/styled';import{useStakingInfo}from'../../state/stake/hooks';import{BIG_INT_ZERO}from'../../constants';var PageWrapper=styled(AutoColumn)(_templateObject());var VoteCard=styled(DataCard)(_templateObject2());var TitleRow=styled(RowBetween)(_templateObject3(),function(_ref){var theme=_ref.theme;return theme.mediaWidth.upToSmall(_templateObject4());});var ButtonRow=styled(RowFixed)(_templateObject5(),function(_ref2){var theme=_ref2.theme;return theme.mediaWidth.upToSmall(_templateObject6());});var ResponsiveButtonPrimary=styled(ButtonPrimary)(_templateObject7(),function(_ref3){var theme=_ref3.theme;return theme.mediaWidth.upToSmall(_templateObject8());});var ResponsiveButtonSecondary=styled(ButtonSecondary)(_templateObject9(),function(_ref4){var theme=_ref4.theme;return theme.mediaWidth.upToSmall(_templateObject10());});var EmptyProposals=styled.div(_templateObject11(),function(_ref5){var theme=_ref5.theme;return theme.text4;});export default function Pool(){var theme=useContext(ThemeContext);var _useActiveWeb3React=useActiveWeb3React(),account=_useActiveWeb3React.account;// fetch the user's balances of all tracked V2 LP tokens\nvar trackedTokenPairs=useTrackedTokenPairs();var tokenPairsWithLiquidityTokens=useMemo(function(){return trackedTokenPairs.map(function(tokens){return{liquidityToken:toV2LiquidityToken(tokens),tokens:tokens};});},[trackedTokenPairs]);var liquidityTokens=useMemo(function(){return tokenPairsWithLiquidityTokens.map(function(tpwlt){return tpwlt.liquidityToken;});},[tokenPairsWithLiquidityTokens]);var _useTokenBalancesWith=useTokenBalancesWithLoadingIndicator(account!==null&&account!==void 0?account:undefined,liquidityTokens),_useTokenBalancesWith2=_slicedToArray(_useTokenBalancesWith,2),v2PairsBalances=_useTokenBalancesWith2[0],fetchingV2PairBalances=_useTokenBalancesWith2[1];// fetch the reserves for all V2 pools in which the user has a balance\nvar liquidityTokensWithBalances=useMemo(function(){return tokenPairsWithLiquidityTokens.filter(function(_ref6){var _v2PairsBalances$liqu;var liquidityToken=_ref6.liquidityToken;return(_v2PairsBalances$liqu=v2PairsBalances[liquidityToken.address])===null||_v2PairsBalances$liqu===void 0?void 0:_v2PairsBalances$liqu.greaterThan('0');});},[tokenPairsWithLiquidityTokens,v2PairsBalances]);var v2Pairs=usePairs(liquidityTokensWithBalances.map(function(_ref7){var tokens=_ref7.tokens;return tokens;}));var v2IsLoading=fetchingV2PairBalances||(v2Pairs===null||v2Pairs===void 0?void 0:v2Pairs.length)<liquidityTokensWithBalances.length||(v2Pairs===null||v2Pairs===void 0?void 0:v2Pairs.some(function(V2Pair){return!V2Pair;}));var allV2PairsWithLiquidity=v2Pairs.map(function(_ref8){var _ref9=_slicedToArray(_ref8,2),pair=_ref9[1];return pair;}).filter(function(v2Pair){return Boolean(v2Pair);});var hasV1Liquidity=useUserHasLiquidityInAllTokens();// show liquidity even if its deposited in rewards contract\nvar stakingInfo=useStakingInfo();var stakingInfosWithBalance=stakingInfo===null||stakingInfo===void 0?void 0:stakingInfo.filter(function(pool){return JSBI.greaterThan(pool.stakedAmount.raw,BIG_INT_ZERO);});var stakingPairs=usePairs(stakingInfosWithBalance===null||stakingInfosWithBalance===void 0?void 0:stakingInfosWithBalance.map(function(stakingInfo){return stakingInfo.tokens;}));// remove any pairs that also are included in pairs with stake in mining pool\nvar v2PairsWithoutStakedAmount=allV2PairsWithLiquidity.filter(function(v2Pair){return(stakingPairs===null||stakingPairs===void 0?void 0:stakingPairs.map(function(stakingPair){return stakingPair[1];}).filter(function(stakingPair){return(stakingPair===null||stakingPair===void 0?void 0:stakingPair.liquidityToken.address)===v2Pair.liquidityToken.address;}).length)===0;});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(PageWrapper,null,/*#__PURE__*/React.createElement(SwapPoolTabs,{active:'pool'}),/*#__PURE__*/React.createElement(VoteCard,null,/*#__PURE__*/React.createElement(CardBGImage,null),/*#__PURE__*/React.createElement(CardNoise,null),/*#__PURE__*/React.createElement(CardSection,null,/*#__PURE__*/React.createElement(AutoColumn,{gap:\"md\"},/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(TYPE.white,{fontWeight:600},\"Liquidity provider rewards\")),/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(TYPE.white,{fontSize:14},\"Liquidity providers earn a 0.3% fee on all trades proportional to their share of the pool. Fees are added to the pool, accrue in real time and can be claimed by withdrawing your liquidity.\")),/*#__PURE__*/React.createElement(ExternalLink,{style:{color:'white',textDecoration:'underline'},target:\"_blank\",href:\"https://uniswap.org/docs/v2/core-concepts/pools/\"},/*#__PURE__*/React.createElement(TYPE.white,{fontSize:14},\"Read more about providing liquidity\")))),/*#__PURE__*/React.createElement(CardBGImage,null),/*#__PURE__*/React.createElement(CardNoise,null)),/*#__PURE__*/React.createElement(AutoColumn,{gap:\"lg\",justify:\"center\"},/*#__PURE__*/React.createElement(AutoColumn,{gap:\"lg\",style:{width:'100%'}},/*#__PURE__*/React.createElement(TitleRow,{style:{marginTop:'1rem'},padding:'0'},/*#__PURE__*/React.createElement(HideSmall,null,/*#__PURE__*/React.createElement(TYPE.mediumHeader,{style:{marginTop:'0.5rem',justifySelf:'flex-start'}},\"Your liquidity\")),/*#__PURE__*/React.createElement(ButtonRow,null,/*#__PURE__*/React.createElement(ResponsiveButtonSecondary,{as:Link,padding:\"6px 8px\",to:\"/create/ETH\"},\"Create a pair\"),/*#__PURE__*/React.createElement(ResponsiveButtonPrimary,{id:\"join-pool-button\",as:Link,padding:\"6px 8px\",borderRadius:\"12px\",to:\"/add/ETH\"},/*#__PURE__*/React.createElement(Text,{fontWeight:500,fontSize:16},\"Add Liquidity\")))),!account?/*#__PURE__*/React.createElement(Card,{padding:\"40px\"},/*#__PURE__*/React.createElement(TYPE.body,{color:theme.text3,textAlign:\"center\"},\"Connect to a wallet to view your liquidity.\")):v2IsLoading?/*#__PURE__*/React.createElement(EmptyProposals,null,/*#__PURE__*/React.createElement(TYPE.body,{color:theme.text3,textAlign:\"center\"},/*#__PURE__*/React.createElement(Dots,null,\"Loading\"))):(allV2PairsWithLiquidity===null||allV2PairsWithLiquidity===void 0?void 0:allV2PairsWithLiquidity.length)>0||(stakingPairs===null||stakingPairs===void 0?void 0:stakingPairs.length)>0?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ButtonSecondary,null,/*#__PURE__*/React.createElement(RowBetween,null,/*#__PURE__*/React.createElement(ExternalLink,{href:'https://uniswap.info/account/'+account},\"Account analytics and accrued fees\"),/*#__PURE__*/React.createElement(\"span\",null,\" \\u2197\"))),v2PairsWithoutStakedAmount.map(function(v2Pair){return/*#__PURE__*/React.createElement(FullPositionCard,{key:v2Pair.liquidityToken.address,pair:v2Pair});}),stakingPairs.map(function(stakingPair,i){return stakingPair[1]&&/*#__PURE__*/ // skip pairs that arent loaded\nReact.createElement(FullPositionCard,{key:stakingInfosWithBalance[i].stakingRewardAddress,pair:stakingPair[1],stakedBalance:stakingInfosWithBalance[i].stakedAmount});})):/*#__PURE__*/React.createElement(EmptyProposals,null,/*#__PURE__*/React.createElement(TYPE.body,{color:theme.text3,textAlign:\"center\"},\"No liquidity found.\")),/*#__PURE__*/React.createElement(AutoColumn,{justify:'center',gap:\"md\"},/*#__PURE__*/React.createElement(Text,{textAlign:\"center\",fontSize:14,style:{padding:'.5rem 0 .5rem 0'}},hasV1Liquidity?'Uniswap V1 liquidity found!':\"Don't see a pool you joined?\",' ',/*#__PURE__*/React.createElement(StyledInternalLink,{id:\"import-pool-link\",to:hasV1Liquidity?'/migrate/v1':'/find'},hasV1Liquidity?'Migrate now.':'Import it.')))))));}","map":{"version":3,"sources":["/projects/testswap/uniswap-interface/src/pages/Pool/index.tsx"],"names":["React","useContext","useMemo","styled","ThemeContext","JSBI","Link","SwapPoolTabs","FullPositionCard","useUserHasLiquidityInAllTokens","useTokenBalancesWithLoadingIndicator","StyledInternalLink","ExternalLink","TYPE","HideSmall","Text","Card","RowBetween","RowFixed","ButtonPrimary","ButtonSecondary","AutoColumn","useActiveWeb3React","usePairs","toV2LiquidityToken","useTrackedTokenPairs","Dots","CardSection","DataCard","CardNoise","CardBGImage","useStakingInfo","BIG_INT_ZERO","PageWrapper","VoteCard","TitleRow","theme","mediaWidth","upToSmall","ButtonRow","ResponsiveButtonPrimary","ResponsiveButtonSecondary","EmptyProposals","div","text4","Pool","account","trackedTokenPairs","tokenPairsWithLiquidityTokens","map","tokens","liquidityToken","liquidityTokens","tpwlt","undefined","v2PairsBalances","fetchingV2PairBalances","liquidityTokensWithBalances","filter","address","greaterThan","v2Pairs","v2IsLoading","length","some","V2Pair","allV2PairsWithLiquidity","pair","v2Pair","Boolean","hasV1Liquidity","stakingInfo","stakingInfosWithBalance","pool","stakedAmount","raw","stakingPairs","v2PairsWithoutStakedAmount","stakingPair","color","textDecoration","width","marginTop","justifySelf","text3","i","stakingRewardAddress","padding"],"mappings":"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","sourcesContent":["import React, { useContext, useMemo } from 'react'\nimport styled, { ThemeContext } from 'styled-components'\nimport { Pair, JSBI } from '@uniswap/sdk'\nimport { Link } from 'react-router-dom'\nimport { SwapPoolTabs } from '../../components/NavigationTabs'\n\nimport FullPositionCard from '../../components/PositionCard'\nimport { useUserHasLiquidityInAllTokens } from '../../data/V1'\nimport { useTokenBalancesWithLoadingIndicator } from '../../state/wallet/hooks'\nimport { StyledInternalLink, ExternalLink, TYPE, HideSmall } from '../../theme'\nimport { Text } from 'rebass'\nimport Card from '../../components/Card'\nimport { RowBetween, RowFixed } from '../../components/Row'\nimport { ButtonPrimary, ButtonSecondary } from '../../components/Button'\nimport { AutoColumn } from '../../components/Column'\n\nimport { useActiveWeb3React } from '../../hooks'\nimport { usePairs } from '../../data/Reserves'\nimport { toV2LiquidityToken, useTrackedTokenPairs } from '../../state/user/hooks'\nimport { Dots } from '../../components/swap/styleds'\nimport { CardSection, DataCard, CardNoise, CardBGImage } from '../../components/earn/styled'\nimport { useStakingInfo } from '../../state/stake/hooks'\nimport { BIG_INT_ZERO } from '../../constants'\n\nconst PageWrapper = styled(AutoColumn)`\n  max-width: 640px;\n  width: 100%;\n`\n\nconst VoteCard = styled(DataCard)`\n  background: radial-gradient(76.02% 75.41% at 1.84% 0%, #27ae60 0%, #000000 100%);\n  overflow: hidden;\n`\n\nconst TitleRow = styled(RowBetween)`\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    flex-wrap: wrap;\n    gap: 12px;\n    width: 100%;\n    flex-direction: column-reverse;\n  `};\n`\n\nconst ButtonRow = styled(RowFixed)`\n  gap: 8px;\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    width: 100%;\n    flex-direction: row-reverse;\n    justify-content: space-between;\n  `};\n`\n\nconst ResponsiveButtonPrimary = styled(ButtonPrimary)`\n  width: fit-content;\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    width: 48%;\n  `};\n`\n\nconst ResponsiveButtonSecondary = styled(ButtonSecondary)`\n  width: fit-content;\n  ${({ theme }) => theme.mediaWidth.upToSmall`\n    width: 48%;\n  `};\n`\n\nconst EmptyProposals = styled.div`\n  border: 1px solid ${({ theme }) => theme.text4};\n  padding: 16px 12px;\n  border-radius: 12px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`\n\nexport default function Pool() {\n  const theme = useContext(ThemeContext)\n  const { account } = useActiveWeb3React()\n\n  // fetch the user's balances of all tracked V2 LP tokens\n  const trackedTokenPairs = useTrackedTokenPairs()\n  const tokenPairsWithLiquidityTokens = useMemo(\n    () => trackedTokenPairs.map(tokens => ({ liquidityToken: toV2LiquidityToken(tokens), tokens })),\n    [trackedTokenPairs]\n  )\n  const liquidityTokens = useMemo(() => tokenPairsWithLiquidityTokens.map(tpwlt => tpwlt.liquidityToken), [\n    tokenPairsWithLiquidityTokens\n  ])\n  const [v2PairsBalances, fetchingV2PairBalances] = useTokenBalancesWithLoadingIndicator(\n    account ?? undefined,\n    liquidityTokens\n  )\n\n  // fetch the reserves for all V2 pools in which the user has a balance\n  const liquidityTokensWithBalances = useMemo(\n    () =>\n      tokenPairsWithLiquidityTokens.filter(({ liquidityToken }) =>\n        v2PairsBalances[liquidityToken.address]?.greaterThan('0')\n      ),\n    [tokenPairsWithLiquidityTokens, v2PairsBalances]\n  )\n\n  const v2Pairs = usePairs(liquidityTokensWithBalances.map(({ tokens }) => tokens))\n  const v2IsLoading =\n    fetchingV2PairBalances || v2Pairs?.length < liquidityTokensWithBalances.length || v2Pairs?.some(V2Pair => !V2Pair)\n\n  const allV2PairsWithLiquidity = v2Pairs.map(([, pair]) => pair).filter((v2Pair): v2Pair is Pair => Boolean(v2Pair))\n\n  const hasV1Liquidity = useUserHasLiquidityInAllTokens()\n\n  // show liquidity even if its deposited in rewards contract\n  const stakingInfo = useStakingInfo()\n  const stakingInfosWithBalance = stakingInfo?.filter(pool => JSBI.greaterThan(pool.stakedAmount.raw, BIG_INT_ZERO))\n  const stakingPairs = usePairs(stakingInfosWithBalance?.map(stakingInfo => stakingInfo.tokens))\n\n  // remove any pairs that also are included in pairs with stake in mining pool\n  const v2PairsWithoutStakedAmount = allV2PairsWithLiquidity.filter(v2Pair => {\n    return (\n      stakingPairs\n        ?.map(stakingPair => stakingPair[1])\n        .filter(stakingPair => stakingPair?.liquidityToken.address === v2Pair.liquidityToken.address).length === 0\n    )\n  })\n\n  return (\n    <>\n      <PageWrapper>\n        <SwapPoolTabs active={'pool'} />\n        <VoteCard>\n          <CardBGImage />\n          <CardNoise />\n          <CardSection>\n            <AutoColumn gap=\"md\">\n              <RowBetween>\n                <TYPE.white fontWeight={600}>Liquidity provider rewards</TYPE.white>\n              </RowBetween>\n              <RowBetween>\n                <TYPE.white fontSize={14}>\n                  {`Liquidity providers earn a 0.3% fee on all trades proportional to their share of the pool. Fees are added to the pool, accrue in real time and can be claimed by withdrawing your liquidity.`}\n                </TYPE.white>\n              </RowBetween>\n              <ExternalLink\n                style={{ color: 'white', textDecoration: 'underline' }}\n                target=\"_blank\"\n                href=\"https://uniswap.org/docs/v2/core-concepts/pools/\"\n              >\n                <TYPE.white fontSize={14}>Read more about providing liquidity</TYPE.white>\n              </ExternalLink>\n            </AutoColumn>\n          </CardSection>\n          <CardBGImage />\n          <CardNoise />\n        </VoteCard>\n\n        <AutoColumn gap=\"lg\" justify=\"center\">\n          <AutoColumn gap=\"lg\" style={{ width: '100%' }}>\n            <TitleRow style={{ marginTop: '1rem' }} padding={'0'}>\n              <HideSmall>\n                <TYPE.mediumHeader style={{ marginTop: '0.5rem', justifySelf: 'flex-start' }}>\n                  Your liquidity\n                </TYPE.mediumHeader>\n              </HideSmall>\n              <ButtonRow>\n                <ResponsiveButtonSecondary as={Link} padding=\"6px 8px\" to=\"/create/ETH\">\n                  Create a pair\n                </ResponsiveButtonSecondary>\n                <ResponsiveButtonPrimary\n                  id=\"join-pool-button\"\n                  as={Link}\n                  padding=\"6px 8px\"\n                  borderRadius=\"12px\"\n                  to=\"/add/ETH\"\n                >\n                  <Text fontWeight={500} fontSize={16}>\n                    Add Liquidity\n                  </Text>\n                </ResponsiveButtonPrimary>\n              </ButtonRow>\n            </TitleRow>\n\n            {!account ? (\n              <Card padding=\"40px\">\n                <TYPE.body color={theme.text3} textAlign=\"center\">\n                  Connect to a wallet to view your liquidity.\n                </TYPE.body>\n              </Card>\n            ) : v2IsLoading ? (\n              <EmptyProposals>\n                <TYPE.body color={theme.text3} textAlign=\"center\">\n                  <Dots>Loading</Dots>\n                </TYPE.body>\n              </EmptyProposals>\n            ) : allV2PairsWithLiquidity?.length > 0 || stakingPairs?.length > 0 ? (\n              <>\n                <ButtonSecondary>\n                  <RowBetween>\n                    <ExternalLink href={'https://uniswap.info/account/' + account}>\n                      Account analytics and accrued fees\n                    </ExternalLink>\n                    <span> ↗</span>\n                  </RowBetween>\n                </ButtonSecondary>\n                {v2PairsWithoutStakedAmount.map(v2Pair => (\n                  <FullPositionCard key={v2Pair.liquidityToken.address} pair={v2Pair} />\n                ))}\n                {stakingPairs.map(\n                  (stakingPair, i) =>\n                    stakingPair[1] && ( // skip pairs that arent loaded\n                      <FullPositionCard\n                        key={stakingInfosWithBalance[i].stakingRewardAddress}\n                        pair={stakingPair[1]}\n                        stakedBalance={stakingInfosWithBalance[i].stakedAmount}\n                      />\n                    )\n                )}\n              </>\n            ) : (\n              <EmptyProposals>\n                <TYPE.body color={theme.text3} textAlign=\"center\">\n                  No liquidity found.\n                </TYPE.body>\n              </EmptyProposals>\n            )}\n\n            <AutoColumn justify={'center'} gap=\"md\">\n              <Text textAlign=\"center\" fontSize={14} style={{ padding: '.5rem 0 .5rem 0' }}>\n                {hasV1Liquidity ? 'Uniswap V1 liquidity found!' : \"Don't see a pool you joined?\"}{' '}\n                <StyledInternalLink id=\"import-pool-link\" to={hasV1Liquidity ? '/migrate/v1' : '/find'}>\n                  {hasV1Liquidity ? 'Migrate now.' : 'Import it.'}\n                </StyledInternalLink>\n              </Text>\n            </AutoColumn>\n          </AutoColumn>\n        </AutoColumn>\n      </PageWrapper>\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}